<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<VBox fx:id="rootContainer" xmlns="http://javafx.com/javafx/17" 
      xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.htshare.ui.MainController"
      spacing="0" styleClass="root-container">

    <!-- Header -->
    <HBox styleClass="header" alignment="CENTER_LEFT">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>
        
        <VBox HBox.hgrow="ALWAYS" spacing="5">
            <Label text="📁 File Share" styleClass="app-title">
                <font>
                    <Font name="System Bold" size="24"/>
                </font>
            </Label>
            <Label text="Share files securely over your local network" styleClass="app-subtitle"/>
        </VBox>
        
        <ToggleButton fx:id="themeToggle" text="🌙" styleClass="theme-toggle" 
                     onAction="#handleThemeToggle" mnemonicParsing="false"/>
    </HBox>

    <!-- Main Content -->
    <VBox VBox.vgrow="ALWAYS" spacing="20" styleClass="content-area">
        <padding>
            <Insets top="30" right="30" bottom="30" left="30"/>
        </padding>

        <!-- Network Status Section -->
        <VBox spacing="10" styleClass="section network-section">
            <Label text="Network Status" styleClass="section-title">
                <font>
                    <Font name="System Bold" size="16"/>
                </font>
            </Label>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label fx:id="networkStatusLabel" 
                      text="Checking network..." 
                      styleClass="network-status"
                      wrapText="true"
                      HBox.hgrow="ALWAYS"/>
                
                <Button fx:id="refreshNetworkButton" 
                       text="🔄" 
                      
                       styleClass="icon-button"
                       minWidth="35"
                       minHeight="35"/>
            </HBox>
        </VBox>

        <!-- Folder Selection Section -->
        <VBox spacing="12" styleClass="section">
            <Label text="Select Folder" styleClass="section-title">
                <font>
                    <Font name="System Bold" size="16"/>
                </font>
            </Label>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button fx:id="selectFolderButton" text="Browse..." 
                       onAction="#handleSelectFolder" 
                       styleClass="primary-button"
                       prefWidth="120"/>
                
                <Label fx:id="folderPathLabel" 
                      text="No folder selected" 
                      styleClass="folder-path"
                      HBox.hgrow="ALWAYS"
                      wrapText="true"/>
            </HBox>
        </VBox>

        <!-- Server Control Section -->
        <VBox spacing="12" styleClass="section">
            <Label text="Server Control" styleClass="section-title">
                <font>
                    <Font name="System Bold" size="16"/>
                </font>
            </Label>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button fx:id="startServerButton" 
                       text="Start Server" 
                       onAction="#handleStartServer"
                       styleClass="success-button"
                       prefWidth="120"
                       disable="true"/>
                
                <Button fx:id="stopServerButton" 
                       text="Stop Server" 
                       onAction="#handleStopServer"
                       styleClass="danger-button"
                       prefWidth="120"
                       disable="true"/>
                
                <ProgressIndicator fx:id="serverProgress" 
                                 prefWidth="30" 
                                 prefHeight="30"
                                 visible="false"/>
                
                <Region HBox.hgrow="ALWAYS"/>
                
                <CheckBox fx:id="autoShutdownCheck" 
                         text="Auto-shutdown (5 min idle)"
                         styleClass="checkbox"
                         selected="true"/>
            </HBox>
            
            <!-- Port Information -->
            <Label fx:id="portInfoLabel" 
                  styleClass="port-info"
                  visible="false"
                  wrapText="true"/>
        </VBox>

        <!-- Statistics Section -->
        <HBox spacing="15" styleClass="section stats-section" visible="false" fx:id="statsSection">
            <VBox spacing="5" HBox.hgrow="ALWAYS">
                <Label text="Total Requests" styleClass="stats-label"/>
                <Label fx:id="requestsLabel" text="0" styleClass="stats-value"/>
            </VBox>
            
            <VBox spacing="5" HBox.hgrow="ALWAYS">
                <Label text="Downloads" styleClass="stats-label"/>
                <Label fx:id="downloadsLabel" text="0" styleClass="stats-value"/>
            </VBox>
            
            <VBox spacing="5" HBox.hgrow="ALWAYS">
                <Label text="Active Connections" styleClass="stats-label"/>
                <Label fx:id="activeConnectionsLabel" text="0" styleClass="stats-value"/>
            </VBox>
            
            <VBox spacing="5" HBox.hgrow="ALWAYS">
                <Label text="Time Remaining" styleClass="stats-label"/>
                <Label fx:id="timeRemainingLabel" text="--" styleClass="stats-value"/>
            </VBox>
        </HBox>

        <!-- QR Code Section -->
        <VBox spacing="12" styleClass="section qr-section" alignment="CENTER" VBox.vgrow="ALWAYS">
            <Label text="Scan QR Code to Connect" styleClass="section-title">
                <font>
                    <Font name="System Bold" size="16"/>
                </font>
            </Label>
            
            <VBox alignment="CENTER" spacing="15" styleClass="qr-container">
                <ImageView fx:id="qrCodeImageView" 
                          fitWidth="300" 
                          fitHeight="300" 
                          preserveRatio="true"
                          visible="false"/>
                
                <HBox spacing="10" alignment="CENTER" fx:id="urlContainer" visible="false">
                    <Label fx:id="serverUrlLabel" styleClass="server-url">
                        <font>
                            <Font name="Monospaced" size="14"/>
                        </font>
                    </Label>
                    
                    <Button fx:id="copyUrlButton" 
                           text="📋" 
                           styleClass="icon-button"
                           minWidth="35"
                           minHeight="35"/>
                </HBox>
            </VBox>
        </VBox>

        <!-- Status Bar -->
        <HBox styleClass="status-bar" alignment="CENTER_LEFT">
            <padding>
                <Insets top="12" right="15" bottom="12" left="15"/>
            </padding>
            <Label fx:id="statusLabel" 
                  text="Ready" 
                  styleClass="status-info"/>
        </HBox>
    </VBox>

    <!-- Footer -->
    <HBox styleClass="footer" alignment="CENTER" spacing="15">
        <padding>
            <Insets top="10" right="15" bottom="10" left="15"/>
        </padding>
        
        <Hyperlink text="GitHub" fx:id="githubLink"  styleClass="footer-link"/>
        
        <Label text="|" styleClass="footer-separator"/>
        
        <Label text="© 2025 TNLucifer" styleClass="footer-text"/>
    </HBox>
</VBox>